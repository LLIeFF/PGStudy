# Используем кластер postgres 15 из ДЗ №3
# Кластер развёрнут на ubuntu 20.04 в VirtualBox 7<br/>

## Подключимся клиентом:
## psql -U postgres -h localhost
### (запрашивается пароль, вводим его)
## Установим создание контрольной точки раз в 30 сек.:
## ALTER SYSTEM SET checkpoint_timeout = '30s';
## SELECT pg_reload_conf();
## Засечём объём логов:
## SELECT SUM(size) FROM pg_ls_waldir();
###     sum     
###  ------------
###   1795162112
###  (1 row)
## Создадим базу для тестов:
## CREATE DATABASE test;
## \q
## Инициализируем pg_bench:
## pgbench -h 0.0.0.0 -i test
## Запустим 10-минутный тест:
## pgbench -h 0.0.0.0 -T 600 test
## Подключимся к базе:
## psql -U postgres -h localhost -d test
### (запрашивается пароль, вводим его)
## Посмотрим объём логов:
## SELECT SUM(size) FROM pg_ls_waldir();
###     sum     
###  ------------
###   1375731712
###  (1 row)
## Перевед]м в вертикальный режим:
## \x
## Запросим информацию о статистике создания контрольных точек:
## SELECT * FROM pg_stat_bgwriter;
### -[ RECORD 1 ]---------+------------------------------
### checkpoints_timed     | 64
### checkpoints_req       | 1
### checkpoint_write_time | 624458
### checkpoint_sync_time  | 549
### buffers_checkpoint    | 41757
### buffers_clean         | 0
### maxwritten_clean      | 0
### buffers_backend       | 3902
### buffers_backend_fsync | 0
### buffers_alloc         | 5844
### stats_reset           | 2025-02-06 16:55:38.195326+03
